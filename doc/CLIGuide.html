<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      CLIGuide â€“ HandBrake
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="search" href="/search" />
        <link rel="help" href="/wiki/TracGuide" />
        <link rel="alternate" href="/wiki/CLIGuide?format=txt" type="text/x-trac-wiki" title="Plain Text" />
        <link rel="start" href="/wiki" />
        <link rel="stylesheet" href="/chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="/chrome/common/css/wiki.css" type="text/css" />
        <link rel="shortcut icon" href="/chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="/chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="/search/opensearch" title="Search HandBrake" />
    <script type="text/javascript" src="/chrome/common/js/jquery.js"></script><script type="text/javascript" src="/chrome/common/js/babel.js"></script><script type="text/javascript" src="/chrome/common/js/trac.js"></script><script type="text/javascript" src="/chrome/common/js/search.js"></script><script type="text/javascript" src="/chrome/common/js/folding.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $("#content").find(".wikianchor").each(function() {
          $(this).addAnchor(babel.format(_("Link to #%(id)s"), {id: $(this).attr('id')}));
        });
        $(".foldable").enableFolding(true, true);
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://handbrake.fr/"><img src="/HandBrakeIcon128.png" alt="" /></a>
      </div>
      <form id="search" action="/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="/login">Login</a></li><li><a href="/wiki/TracGuide">Help/Guide</a></li><li><a href="/about">About Trac</a></li><li class="last"><a href="/prefs">Preferences</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="/wiki">Wiki</a></li><li><a href="/timeline">Timeline</a></li><li><a href="/roadmap">Roadmap</a></li><li><a href="/browser">Browse Source</a></li><li><a href="/report">View Tickets</a></li><li class="last"><a href="/search">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="pagepath" class="noprint">
  <a class="pathentry first" title="View WikiStart" href="/wiki">wiki:</a><a class="pathentry" href="/wiki/CLIGuide" title="View CLIGuide">CLIGuide</a>
</div>
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="/wiki/WikiStart">Start Page</a></li><li><a href="/wiki/TitleIndex">Index</a></li><li class="last"><a href="/wiki/CLIGuide?action=history">History</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <div class="wikipage searchable">
        
          
          <div class="trac-modifiedby"><a href="/wiki/CLIGuide?action=diff&amp;version=21" title="Version 21 by sr55: Formatting fixes">Last modified</a> <a class="timeline" href="/timeline?from=2010-12-11T21%3A19%3A04Z&amp;precision=second" title="2010-12-11T21:19:04Z in Timeline">9 months</a> ago</div>
          <div id="wikipage"><h1 id="UsingHandBrakeCLI">Using HandBrakeCLI</h1>
<p>
HandBrake's CLI is really easy to use. If you get comfortable with it, it can be a lot more efficient than the GUIs.
</p>
<ul><li><a class="wiki" href="/wiki/CLIGuide#basics">Basics</a>
</li><li><a class="wiki" href="/wiki/CLIGuide#presets">Presets</a>
</li><li><a class="wiki" href="/wiki/CLIGuide#options">Option by Option</a>
</li><li><a class="wiki" href="/wiki/CLIGuide#links">Other Resources</a>
</li></ul><p>
 
</p>
<h2 id="basics">The Basics</h2>
<p>
First, simple input and output.
</p>
<pre class="wiki">HandBrakeCLI -i source -o destination
</pre><p>
That will encode with default values: 1000kbps ffmpeg video and 160kbps AAC audio in an .mp4 container.
</p>
<p>
Easy, right? So now you can start customizing those settings. You can pile on all sorts of things, and end up with a monster like:
</p>
<pre class="wiki">HandBrakeCLI -i /Volumes/MyBook/VIDEO_TS -o /Volumes/MyBook/movie.m4v -v -P -m -E aac,ac3 -e x264
-q 0.65 -x ref=3:mixed-refs:bframes=6:b-pyramid=1:weightb=1:analyse=all:8x8dct=1:subme=7:me=umh
:merange=24:filter=-2,-2:trellis=1:no-fast-pskip=1:no-dct-decimate=1:direct=auto
</pre><p>
For now, think about less complex stuff:
</p>
<pre class="wiki">HandBrakeCLI -i VIDEO_TS -o movie.mp4 -e x264 -b 2000 -B 192
</pre><p>
That will encode a source video located at the path VIDEO_TS to an output file called movie.mp4. It will use x264 with a bitrate of 2000 to encode the video, and encode the audio as 128kb/s AAC.
</p>
<p>
So can you start to see how this works? The most important info for HandBrakeCLI is the location of the DVD, and the location and name where you want to store the encoded video it will output. If you don't specify anything else, it uses fast, low-quality, default values. Each bit of information is preceded by a flag: -i for input, -o for output. To select an encoder, you use -e followed by the encoder name. So <tt>-e x264</tt> uses x264 to encode the video. Video bitrate is controlled by -b, and audio bitrate is controlled by -B (yes, the option names are case-sensitive. -b is not -B and -e is not -E).
</p>
<h3 id="Afewrudimentaryhintsforusingthecommandline">A few rudimentary hints for using the command line</h3>
<ul><li>Filepaths are important. I'm on a Mac, and my username is jon. My home directory is:
<pre class="wiki">/Users/jon/
</pre>So the path to my Desktop is:
<pre class="wiki">/Users/jon/Desktop
</pre>And so my Movies folder is at
<pre class="wiki">/Users/jon/Movies
</pre>A common shortcut is to use a tilde (~) to represent your home directory. That means:
<pre class="wiki">~/Movies
</pre>is the same as:
<pre class="wiki">/Users/jon/Movies
</pre></li></ul><blockquote>
<p>
Make sure you remember the right capitalization for everything. At the command line, <tt>HandBrakeCLI</tt> is not the same as <tt>handbrakecli</tt>. If you have to type a space in filepath, precede it with a \ backslash so the system knows what's going on.
</p>
</blockquote>
<ul><li>You usually store GUI programs in the /Applications folder. CLI programs are usually stored in places like /usr/bin or /opt/local/bin. You can do that with HandBrake, but the easiest thing to do is just navigate to the directory that stores HandBrakeCLI. To navigate through your file system at the command line, you change directories (folders) by using the "cd" (Change Directories) command. For example, to move to my Movies folder, I would type:
<pre class="wiki">cd ~/Movies
</pre>Then, tell the shell to look for the program in the current working directory. To run a command in the Terminal, you just type its name. But the shell will only look in the places where applications are usually stored (like /usr/bin/). You need to tell it to look in the current directory. To do that, precede the program name with ./ like this:
<pre class="wiki">./HandBrakeCLI
</pre>Of course, running that won't do much anything useful. If you run HandBrake without telling it what to do, it will just tell you to read the help...
</li></ul><h2 id="presets">Presets</h2>
<p>
<a class="wiki" href="/wiki/HandBrake">HandBrake</a> offers hard coded, factory-fresh presets that are exactly the same as <a class="wiki" href="/wiki/BuiltInPresets">the built-in presets</a> in the <a class="wiki" href="/wiki/MacGui">MacGui</a>. <a class="wiki" href="/wiki/BuiltInPresets">Descriptions of presets and rankings for speed, as well as a web-copy of all the presets' CLI strings</a> are available.
</p>
<p>
To use a preset, type, for example:
</p>
<pre class="wiki">./HandBrakeCLI -i /Volumes/DVD -o movie.mp4 --preset="iPhone &amp; iPod Touch" 
</pre><p>
So it's:
</p>
<pre class="wiki">--preset="Preset Name"
</pre><p>
Be careful -- spelling and spacing and capitalization count. Don't forget the quotation marks, either. You can override most preset settings by specifying other options on the command line. To see a list of all the preset names and settings, type:
</p>
<pre class="wiki">./HandBrakeCLI --preset-list
</pre><h2 id="options">Option by Option</h2>
<p>
To see everything HandBrakeCLI has to offer, run this:
</p>
<pre class="wiki">HandBrakeCLI -h
</pre><p>
That should produce this output:
</p>
<pre class="wiki">Syntax: HandBrakeCLI [options] -i &lt;device&gt; -o &lt;file&gt;

### General Handbrake Options------------------------------------------------

    -h, --help              Print help
    -u, --update            Check for updates and exit
    -v, --verbose &lt;#&gt;       Be verbose (optional argument: logging level)
    -C, --cpu               Set CPU count (default: autodetected)
    -Z. --preset &lt;string&gt;   Use a built-in preset. Capitalization matters, and
                            if the preset name has spaces, surround it with
                            double quotation marks
    -z, --preset-list       See a list of available built-in presets
        --no-dvdnav         Do not use dvdnav for reading DVDs
                            (experimental, enabled by default for testing)

### Source Options-----------------------------------------------------------

    -i, --input &lt;string&gt;    Set input device
    -t, --title &lt;number&gt;    Select a title to encode (0 to scan all titles only,
                            default: 1)
        --scan              Scan selected title only.
        --main-feature      Detect and select the main feature title.
    -c, --chapters &lt;string&gt; Select chapters (e.g. "1-3" for chapters
                            1 to 3, or "3" for chapter 3 only,
                            default: all chapters)
        --angle &lt;number&gt;    Select the DVD angle
        --previews &lt;#:B&gt;    Select how many preview images are generated (max 30),
                            and whether or not they're stored to disk (0 or 1).
                            (default: 10:0)
    --start-at-preview &lt;#&gt;  Start encoding at a given preview.
    --start-at    &lt;unit:#&gt;  Start encoding at a given frame, duration (in seconds),
                            or pts (on a 90kHz clock)
    --stop-at     &lt;unit:#&gt;  Stop encoding at a given frame, duration (in seconds),
                            or pts (on a 90kHz clock)
### Destination Options------------------------------------------------------

    -o, --output &lt;string&gt;   Set output file name
    -f, --format &lt;string&gt;   Set output format (mp4/mkv, default:
                            autodetected from file name)
    -m, --markers           Add chapter markers (mp4 and mkv output formats only)
    -4, --large-file        Use 64-bit mp4 files that can hold more than
                            4 GB. Note: Breaks iPod, PS3 compatibility.
    -O, --optimize          Optimize mp4 files for HTTP streaming
    -I, --ipod-atom         Mark mp4 files so 5.5G iPods will accept them

### Video Options------------------------------------------------------------

    -e, --encoder &lt;string&gt;  Set video library encoder (ffmpeg,x264,theora)
                            (default: ffmpeg)
    -x, --x264opts &lt;string&gt; Specify advanced x264 options in the
                            same style as mencoder:
                            option1=value1:option2=value2
    -q, --quality &lt;number&gt;  Set video quality
    -S, --size &lt;MB&gt;         Set target size
    -b, --vb &lt;kb/s&gt;         Set video bitrate (default: 1000)
    -2, --two-pass          Use two-pass mode
    -T, --turbo             When using 2-pass use the turbo options
                            on the first pass to improve speed
                            (only works with x264, affects PSNR by about 0.05dB,
                            and increases first pass speed two to four times)
    -r, --rate              Set video framerate (5/10/12/15/23.976/24/25/29.97)
                            Be aware that not specifying a framerate lets
                            HandBrake preserve a source's time stamps,
                            potentially creating variable framerate video
    --vfr, --cfr, --pfr     Select variable, constant or peak-limited
                            frame rate control. VFR preserves the source
                            timing. CFR makes the output constant rate at
                            the rate given by the -r flag (or the source's
                            average rate if no -r is given). PFR doesn't
                            allow the rate to go over the rate specified
                            with the -r flag but won't change the source
                            timing if it's below that rate.
                            If none of these flags are given, the default
                            is --cfr when -r is given and --vfr otherwise

### Audio Options-----------------------------------------------------------

    -a, --audio &lt;string&gt;    Select audio track(s), separated by commas
                            More than one output track can be used for one
                            input.
                            ("none" for no audio, "1,2,3" for multiple
                             tracks, default: first one)
    -E, --aencoder &lt;string&gt; Audio encoder(s):
                                (faac/lame/vorbis/ac3/copy/copy:ac3/copy:dts)
                            copy, copy:ac3 and copy:dts meaning passthrough.
                            copy will passthrough either ac3 or dts.
                            Separated by commas for more than one audio track.
                            (default: faac for mp4, lame for mkv)
    -B, --ab &lt;kb/s&gt;         Set audio bitrate(s) (default: depends on the
                            selected codec, mixdown and samplerate)
                            Separated by commas for more than one audio track.
    -6, --mixdown &lt;string&gt;  Format(s) for surround sound downmixing
                            Separated by commas for more than one audio track.
                            (mono/stereo/dpl1/dpl2/6ch, default: up to 6ch for ac3,
                            up to dpl2 for other encoders)
    -R, --arate             Set audio samplerate(s) (22.05/24/32/44.1/48 kHz)
                            Separated by commas for more than one audio track.
    -D, --drc &lt;float&gt;       Apply extra dynamic range compression to the audio,
                            making soft sounds louder. Range is 1.0 to 4.0
                            (too loud), with 1.5 - 2.5 being a useful range.
                            Separated by commas for more than one audio track.
    -A, --aname &lt;string&gt;    Audio track name(s),
                            Separated by commas for more than one audio track.

### Picture Settings---------------------------------------------------------

    -w, --width &lt;number&gt;    Set picture width
    -l, --height &lt;number&gt;   Set picture height
        --crop &lt;T:B:L:R&gt;    Set cropping values (default: autocrop)
    -Y, --maxHeight &lt;#&gt;     Set maximum height
    -X, --maxWidth &lt;#&gt;      Set maximum width
    --strict-anamorphic     Store pixel aspect ratio in video stream
    --loose-anamorphic      Store pixel aspect ratio with specified width
    --custom-anamorphic     Store pixel aspect ratio in video stream and
                            directly control all parameters.
    --display-width         Set the width to scale the actual pixels to
      &lt;number&gt;              at playback, for custom anamorphic.
    --keep-display-aspect   Preserve the source's display aspect ratio
                            when using custom anamorphic
    --pixel-aspect          Set a custom pixel aspect for custom anamorphic
      &lt;PARX:PARY&gt;
                            (--display-width and --pixel-aspect are mutually
                             exclusive and the former will override the latter)
    --itu-par               Use wider, ITU pixel aspect values for loose and
                            custom anamorphic, useful with underscanned sources
    --modulus               Set the number you want the scaled pixel dimensions
      &lt;number&gt;              to divide cleanly by. Does not affect strict
                            anamorphic mode, which is always mod 2 (default: 16)
    -M  --color-matrix      Set the color space signaled by the output
          &lt;601 or 709&gt;      (Bt.601 is mostly for SD content, Bt.709 for HD,
                             default: set by resolution)

### Filters---------------------------------------------------------

    -d, --deinterlace       Deinterlace video with yadif/mcdeint filter
          &lt;YM:FD:MM:QP&gt;     (default 0:-1:-1:1)
           or
          &lt;fast/slow/slower&gt;
    -5, --decomb            Selectively deinterlaces when it detects combing
          &lt;MO:ME:MT:ST:BT:BX:BY:MG:VA:LA:DI:ER:NO:MD:PP:FD&gt;
          (default: 7:2:6:9:80:16:16:10:20:20:4:2:50:24:1:-1)
    -9, --detelecine        Detelecine (ivtc) video with pullup filter
                            Note: this filter drops duplicate frames to
                            restore the pre-telecine framerate, unless you
                            specify a constant framerate (--rate 29.97)
          &lt;L:R:T:B:SB:MP:FD&gt;   (default 1:1:4:4:0:0:-1)
    -8, --denoise           Denoise video with hqdn3d filter
          &lt;SL:SC:TL:TC&gt;     (default 4:3:6:4.5)
           or
          &lt;weak/medium/strong&gt;
    -7, --deblock           Deblock video with pp7 filter
          &lt;QP:M&gt;            (default 5:2)
        --rotate            Flips images axes
          &lt;M&gt;               (default 3)
    -g, --grayscale         Grayscale encoding

### Subtitle Options------------------------------------------------------------

    -s, --subtitle &lt;string&gt; Select subtitle track(s), separated by commas
                            More than one output track can be used for one
                            input.
                            Example: "1,2,3" for multiple tracks.
                            A special track name "scan" adds an extra 1st pass.
                            This extra pass scans subtitles matching the
                            language of the first audio or the language 
                            selected by --native-language.
                            The one that's only used 10 percent of the time
                            or less is selected. This should locate subtitles
                            for short foreign language segments. Best used in
                            conjunction with --subtitle-forced.
    -F, --subtitle-forced   Only display subtitles from the selected stream if
          &lt;string&gt;          the subtitle has the forced flag set. The values in
                            "string" are indexes into the subtitle list
                            specified with '--subtitle'.
                            Separated by commas for more than one audio track.
                            Example: "1,2,3" for multiple tracks.
                            If "string" is omitted, the first track is forced.
        --subtitle-burn     "Burn" the selected subtitle into the video track
          &lt;number&gt;          If "number" is omitted, the first track is burned.
                            "number" is an index into the subtitle list
                            specified with '--subtitle'.
        --subtitle-default  Flag the selected subtitle as the default subtitle
          &lt;number&gt;          to be displayed upon playback.  Setting no default
                            means no subtitle will be automatically displayed
                            If "number" is omitted, the first track is default.
                            "number" is an index into the subtitle list
                            specified with '--subtitle'.
    -N, --native-language   Specifiy the your language preference. When the first
          &lt;string&gt;          audio track does not match your native language then
                            select the first subtitle that does. When used in
                            conjunction with --native-dub the audio track is
                            changed in preference to subtitles. Provide the
                            language's iso639-2 code (fre, eng, spa, dut, et cetera)
        --native-dub        Used in conjunction with --native-language
                            requests that if no audio tracks are selected the
                            default selected audio track will be the first one
                            that matches the --native-language. If there are no
                            matching audio tracks then the first matching
                            subtitle track is used instead.
        --srt-file &lt;string&gt; SubRip SRT filename(s), separated by commas.
        --srt-codeset       Character codeset(s) that the SRT file(s) are
          &lt;string&gt;          encoded in, separted by commas.
                            Use 'iconv -l' for a list of valid
                            codesets. If not specified latin1 is assumed
        --srt-offset        Offset in milli-seconds to apply to the SRT file(s)
          &lt;string&gt;          separted by commas. If not specified zero is assumed.
                            Offsets may be negative.
        --srt-lang &lt;string&gt; Language as an iso639-2 code fra, eng, spa et cetera)
                            for the SRT file(s) separated by commas. If not specified
                            then 'und' is used.
        --srt-default       Flag the selected srt as the default subtitle
          &lt;number&gt;          to be displayed upon playback.  Setting no default
                            means no subtitle will be automatically displayed
                            If "number" is omitted, the first srt is default.
                            "number" is an 1 based index into the srt-file list



</pre><p>
Now we'll go through one-by-one...
</p>
<h3 id="GeneralOptions">General Options</h3>
<ul><li><strong>-u</strong> or <strong>--update</strong>: asks the HandBrake website if there's a new version available
</li></ul><ul><li><strong>-v</strong> or <strong>--verbose</strong>: in verbose mode, extra messages from the core library will appear on screen during the encode. This is useful if you're a developer debugging, or if you can't figure out why an encode isn't working right. There are different levels of verbosity. By default enabling -v turns on level 1 logging. This contains anything useful for tech support, and is the "Activity Log" talked about so much on the HandBrake forums. Level 2 adds some memory-related logging, and level 3 is for granular, packet-by-packet analysis for debugging. If you follow -v with a number, like "-v2", it will use that as the verbosity level instead of 1.
</li></ul><p>
 
</p>
<ul><li><strong>-C</strong> or <strong>--cpu</strong>: while the program can discern how many CPUs your computer has on its own, there are some cases when you might want to force a specific number. This flag has to be followed by a number.
</li></ul><ul><li><strong>-Z</strong> or <strong>--preset</strong>: enter a <a class="wiki" href="/wiki/CLIGuide#presets">preset</a> name to use.
</li></ul><ul><li><strong>-z</strong> or <strong>--preset-list</strong>: displays all the <a class="wiki" href="/wiki/CLIGuide#presets">presets</a>' names and what CLI options they use.
</li></ul><ul><li><strong>--no-dvdnav</strong>: Disables the use of libdvdnav. libdvdread will be used instead. This can be useful in situations where libdvdnav struggles to read a DVD source.
</li></ul><h3 id="SourceOptions">Source Options</h3>
<ul><li><strong>-i</strong> or <strong>--input</strong>: input is all important. You must include it, followed by a filepath (like /Volumes/MOVIE or ~/Movies/VIDEO_TS).
</li></ul><ul><li><strong>-t</strong> or <strong>--title</strong>: selects the title from a DVD to encode. If you don't specify it, this will default to 1. To just scan a DVD, letting you see the titles and their durations (to help pick which is the feature you want) as well as the chapter durations, autodetected cropping, subtitle and audio tracks, etc., give this a value of 0.
</li></ul><ul><li><strong>--scan</strong>: Scan only the title number. Any other titles are skipped.
</li></ul><ul><li><strong>--main-feature</strong>: Attempt to detect and encode only the main feature of the source.
</li></ul><ul><li><strong>-c</strong> or <strong>--chapters</strong>: tells it to only encode a specified chapter or range of chapters from the title. If you don't specify, it will default to all chapters. Ranges are given with hyphens, like 1-3.
</li></ul><ul><li><strong>--angle</strong>:  Encode the specified angle from a multi-angle source.
</li></ul><ul><li><strong>--previews</strong>: Increase the number of previews <a class="wiki" href="/wiki/HandBrake">HandBrake</a> generates. Default 10. This can increase the accuracy of the auto cropping feature.
</li></ul><ul><li><strong>--start-at-preview</strong>: Start encoding from one of the (up to 30) previews that handbrake generates during the scan
</li></ul><ul><li><strong>--start-at</strong>: Start encoding from a set point on the source file. (This can be a frame, duration (in seconds) or pts value)
</li></ul><ul><li><strong>--stop-at</strong>: Stop encoding from a set point on the source file. (This can be a frame, duration (in seconds) or pts value)
</li></ul><h3 id="DestinationOptions">Destination Options</h3>
<ul><li><strong>-o</strong> or <strong>--output</strong>: output is all important. You must include it, followed by an output filename with a filepath (like ~/Movies/movie.mp4). If you suffix the file .mp4, .mkv, .avi, or .ogm, it will be encoded with that file format container.
</li></ul><ul><li><strong>-f</strong> or <strong>--format</strong>: forces a particular container file format. Your choices are avi, mp4, mkv, and ogm. If this is omitted, it will try to figure out the format from the output filename.
</li></ul><ul><li><strong>-m</strong> or <strong>--markers</strong>: only available with the .mp4 and .mkv file formats, this setting includes a chapter index in the video, based on the chapter times used on the DVD. In .mp4 files, these chapter markers are in <a class="wiki" href="/wiki/QuickTime">QuickTime</a>'s format. They can be read by VLC, <a class="wiki" href="/wiki/QuickTime">QuickTime</a>, iTunes, the AppleTV, the iPod, and the iPhone. In order for <a class="wiki" href="/wiki/QuickTime">QuickTime</a> to see the chapters, you must rename the output file to end with .m4v instead of .mp4.
</li></ul><p>
If you wish to import chapter names from a csv file, you can do so using the following:  --markers="/full/path/to/chapters_file.csv"
The CSV file should be formatted as follows:
</p>
<pre class="wiki">1,Chapter One
2,Chapter Two
3,Chapter Three
</pre><p>
Note: Should you use a comma in your chapter name: e.g 1,Chapter, Name you must place a backslash before it like so: 1,Chapter\, Name (This slash will not actually appear in the chapter name)
</p>
<ul><li><strong>-4</strong> or <strong>--large-file</strong>: when used with the MP4 file format, this permits creation of files larger than 4GB. But to do so, it uses 64-bit numbers. These make it incompatible with some devices (like the iPod and the PS3) -- and that incompatibility happens whenever the feature is enabled, whether or not the output reaches 4 GB. On the other hand, if you do not enable it, and your MP4 is larger than 4 GB, HandBrake will crash.
</li></ul><ul><li><strong>-O</strong> or <strong>--optimize</strong>: Rearranges MP4 files so they play better over the web as progressive downloads.
</li></ul><ul><li><strong>-I</strong> or <strong>--ipod-atom</strong>: Applies a marker to MP4 files that older iPods require before they'll allow H.264 video to sync.
</li></ul><h3 id="VideoOptions">Video Options</h3>
<ul><li><strong>-e</strong> or <strong>--encoder</strong>: selects the video encoder. The default is ffmpeg (similar to DivX). The other options are xvid, x264, and theora..
</li></ul><ul><li><strong>-x</strong> or <strong>--x264opts</strong>: permits you to pass through <a class="wiki" href="/wiki/x264Options">advanced x264 options</a> thot e encoder.
</li></ul><ul><li><strong>-q</strong> or <strong>--quality</strong>: controls the video quality.  Read the <a class="wiki" href="/wiki/ConstantQuality">Constant Quality</a> guide for good values and an understanding of how this works.
</li></ul><p>
 
</p>
<ul><li><strong>-S</strong> or <strong>--size</strong>: allows you to set an output file size in megabytes. Do not use this if you wish to set a particular bitrate or constant quality. If you set a size larger than 4000MB, make sure to enable the --largeFileSize option.
</li></ul><p>
 
</p>
<ul><li><strong>-b</strong> or <strong>--vb</strong>: allows you to set an average output video bitrate in kilobits per second. Do not use this if you wish to set a particular file size or constant quality. Be aware that for video encoders, 1 megabit is equal to 1000 kilobits, not 1024 kilobits.
</li></ul><ul><li><strong>-2</strong> or <strong>--two-pass</strong>: enables two-pass encoding when using an average bitrate or target file size (but not for a constant quality or rate factor). Two-pass encoding takes about twice as long, but conforms better to the average bitrate and improves picture quality. It takes no options.
</li></ul><ul><li><strong>-T</strong> or <strong>--turbo</strong>: use with 2-pass x264 encodes to significantly boost the speed of the first pass by adding the options: "ref=1:subme=1:me=dia:analyse=none:trellis=0:no-fast-pskip=0:8x8dct=0:weightb=0"
</li></ul><ul><li><strong>-r</strong> or <strong>--rate</strong>: controls <a class="wiki" href="/wiki/FramerateGuide">the video framerate, or FPS</a>. Your options are 5, 10, 12, 15, 23.976, 24, 25, or 29.97. If you do not specify, HandBrake will default to using the same frame rate as the DVD. It will literally pass through the durations of each frame in the source video. This can mean a variable frame rate, because many sources--such as DVDs and other MPEG-2 streams--are inherently variable framerate. A frame remains on screen until the next frame's time stamp is reached. Those time stamps are not always separated by the same amount of time. Note that the .avi format isn't smart enough to understand this. If you do not specify a rate, HandBrake will, for it, instead set the framerate to a constant 23.976, 25, or 29.97 FPS based on some guesswork about the source video.
</li></ul><ul><li><strong>--vfr, --cfr, --pfr</strong>:  Variable, Constant or Peak Framerate.  (Default is VRF unless -r is specified in which case CFR is default)
</li></ul><h3 id="AudioOptions">Audio Options</h3>
<ul><li><strong>-a</strong> or <strong>--audio</strong>: selects the audio track or tracks to encode. You can include an unlimited number of audio tracks, separated by commas. The first track is 1, the second is 2, etc. Each track can use different output settings, and the same input track can be encoded multiple times with different settings.
</li></ul><ul><li><strong>-E</strong> or <strong>--aencoder</strong>: selects the audio encoder. Choices are faac, lame, vorbis, and ac3. Faac encodes AAC, and lame encodes MP3. The defaults are AAC for .mp4, MP3 for .avi, Vorbis for .ogm, and AC3 for .mkv. You can pass-through AC3 (the original Dolby Digital audio from the DVD) when using the .avi, .mkv, and .mp4 file formats. If you pass through AC3 to an .mp4, it will only be recognized by the AppleTV, Perian, and the VLC, and then only when you end the file with the suffix .m4v.  
</li></ul><ul><li><strong>-B</strong> or <strong>--ab</strong>: allows you to set an average audio bitrate in kilobits per second. The default is 160.
</li></ul><ul><li><strong>-6</strong> or <strong>--mixdown</strong>: This controls <a class="wiki" href="/wiki/SurroundSoundGuide">downmixing of the audio</a>. The options are none, mono, stereo, dpl1, dpl2, or 6ch. For example, you could downmix a stereo source to mono, or a 5.1 source to 2-channel Dolby ProLogic 2. Assuming you have not set AC3 pass-through as the audio encoder, the default behavior is for HandBrake to downmix Dolby Digital 5.1 to Dolby ProLogic 2. When encoding audio to AAC, you may use --mixdown 6ch to preserve all of the surround channels in the source audio, creating a 6-channel AAC from a 6-channel (5.1) AC3.
</li></ul><ul><li><strong>-R</strong> or <strong>--arate</strong>: sets the sample rate for the audio in kilohertz. The default, auto, uses the same sample rate as the source audio track, unless it's not compatible with the audio encoder.
</li></ul><ul><li><strong>-D</strong> or <strong>--drc</strong>: if your audio isn't loud enough, you can try applying extra dynamic range compression when encoding from AC3 sources. This will boost up the volume of soft audio samples while leaving loud samples as is. This reduces the dynamic range, but should help for catching quiet audio in noisy listening environments. It takes a floating point number as its value, from 1.0 (off) to 4.0 (blow out your speakers from the background sound of elevator doors closing). 1.5 to 2.5 is a useful range. 
</li></ul><ul><li><strong>-A</strong> or <strong>--aname</strong>: sets an audio track's name. Only available in .mp4 files. This is useful for the AppleTV, which otherwise gets confused when more than one track is in the same language and codec.
</li></ul><h4 id="MultipleAudioTracks">Multiple Audio Tracks</h4>
<p>
HandBrake can encode more than one audio track at a time, or the same track multiple times, and use different settings for each encode. It is common for AppleTV users to make one file that includes the main audio track from the source encoded once to AAC for playback on iPods, and also pass it through as a secondary track.
</p>
<p>
This is achieved by using the command:
</p>
<pre class="wiki">-E aac,ac3
</pre><p>
If you do not specify which audio tracks to encode with the -a option, then HandBrake uses the first track in the source. When you include more than setting for an audio option, separated by a comma, it implicitly tells HandBrake: "The output should have two audio tracks." And without a source audio track specified, it will just use the first track for both.
</p>
<p>
You can also do complete settings for multiple tracks:
</p>
<pre class="wiki">-a 1,1,2 -A "Main Audio","Downmixed Audio","Director's Commentary"-E ac3,aac,aac -B auto,160,128 -R auto,auto,44100 -6 auto,dpl2,stereo 
</pre><p>
There will be 3 audio tracks in the output, named "Main Audio", "Downmixed Audio", and "Director's Commentary" in turn. The first 2 will be the first audio track from the source: once as AC3 passed-through untouched, once as AAC with a bitrate of 160 and a Dolby Pro Logic II mixdown. The third track will use the second audio track from the source, encoded to AAC at a bitrate of 128, with a samplerate of 44.1kHz, and a stereo mixdown.
</p>
<p>
When you don't want to specify any particular setting for one of the tracks, use "auto" as a placeholder.
</p>
<h3 id="PictureSettings">Picture Settings</h3>
<ul><li><strong>-w</strong> or <strong>--width</strong>: Enter your desired output width here in pixels. The default is 720 for widescreen, 640 for fullscreen. If you do not specify a height as well, it will calculate one that will preserve the film's aspect ratio.
</li></ul><ul><li><strong>-l</strong> or <strong>--height</strong>: Enter your desired output height here in pixels. If you do not specify a width as well, it will calculate one that will preserve the film's aspect ratio. The default behavior is to use a height that preserves the film's aspect ratio, given the width. If you specify neither -w nor -l, by default your output will be approximately 720*400 for 1.78:1, 720*386 for 1.85:1, 720*304 for 2.35:1, and 640*480 for 1.33:1.
</li></ul><ul><li><strong>--crop</strong>: controls the cropping values. The cropping has to be in the form Top:Bottom:Left:Right, so to crop 60pixels from the top, 58 from the bottom, 2 from the left, and 6 from the right, use --crop 60:58:2:6 ... do note that this is different from cropping in some other programs, like MEncoder. If you don't enter this setting, HandBrake will automatically detect how many pixels to crop to remove black borders.
</li></ul><ul><li><strong>-Y</strong> or <strong>--maxHeight</strong>: sets an upper boundary on the height. Smaller values will be permitted, but anything larger will be scaled down and the width adjusted to match the film's aspect ratio. For example, the iPhone display is 480*320. While it can accept resolutions up to 640*480, some people prefer to go "dot-by-dot" and encode exactly the number of pixels the device can display, to save space or increase bits per pixel. If you just use -w 480, then with 4:3 content, HandBrake will encode to dimensions of 480*360 (too tall!). If you just use -l 320, then with 16:9 content, HandBrake will encode to dimensions of 570*320 (too wide!). But if you use -w 480 -Y 320, HandBrake will encode to dimensions of 416*320 for 4:3 content and 480*272 for 16:9 content (just right!).
</li></ul><ul><li><strong>-X</strong> or <strong>--maxWidth</strong>: sets an upper boundary on the width. Smaller values will be permitted, but anything larger will be scaled down and the height adjusted to match the film's aspect ratio.
</li></ul><ul><li><strong>-p</strong> or <strong>--pixelratio</strong>: this enables <a class="wiki" href="/wiki/AnamorphicGuide">anamorphic encoding</a> (the "p" is for PAR, pixel aspect ratio). It takes no options.
</li></ul><ul><li><strong>-P</strong> or <strong>--loosePixelratio</strong>: this enables <a class="wiki" href="/wiki/AnamorphicGuide#loose">loose anamorphic encoding</a>. Unlike regular old --pixelratio, it will use <a class="wiki" href="/wiki/AnamorphicGuide#macro">dimensions that divide cleanly by 16</a>, and allow you to scale down the stored frame by giving HandBrake a --width. It takes an optional argument, that makes it so dimensions divide cleanly by some number other than 16 (8 is popular). That is done like so: --loosePixelratio=8. It also handles <a class="wiki" href="/wiki/AnamorphicGuide#itu">ITU pixel aspects</a>, which are applied automatically when the source width after cropping is less than 708.
</li></ul><ul><li><strong>-M</strong> or <strong>--color-matrix</strong>: tells video players to use either Bt.601 or Bt.709 color to display the encoded output, with the required option of 601 or 709. Only effective with .mp4 files and/or x264 video. Bt.601 is what standard definition video like DVDs is supposed to use, and Bt.709 is supposed to be for high definition, so that's what HandBrake signals by default if you do not include this setting.
</li></ul><h3 id="Filters">Filters</h3>
<ul><li><strong>-d</strong> or <strong>--deinterlace</strong>: turns on <a class="wiki" href="/wiki/DeinterlacingGuide">deinterlacing</a> filtering. It accepts parameters in the form --deinterlace="1:-1:1". The first parameter controls yadif and ffmpeg. "-1" means ffmpeg, HandBrake's fast, quick'n'dirty, traditional deinterlacer. "0" means yadif with 1-pass and spatial deinterlacing. "2" means yadif with 1-pass without spatial deinterlacing. "1" means yadif with 2-pass and spatial deinterlacing. The second parameter is the field dominance. "-1" means "assume top field first" and it should generally be left that way. The third parameter controls mcdeint, which is currently broken, so leave it set to "-1". There are also short names for commonly used parameters: "fast" is --deinterlacer="-1", "slow" is --deinterlace="2", and "slower" is --deinterlace="0". So you can also just do: --deinterlace="slow".
</li></ul><ul><li><strong>-5</strong> or <strong>--decomb</strong>:  selective deinterlacer -- it only deinterlaces frames that show visible interlacing artifacts. Much <a class="wiki" href="/wiki/Decomb">more information on decomb</a> is available, but using it with its default options should work out well most of the time.
</li></ul><ul><li><strong>-9</strong> or <strong>--detelecine</strong>: stateless inverse telecine (the pullup filter from MPlayer). When 24fps content is hard-telecined to 30fps by interpolating extra, interlaced fields, detelecine will restore the video to progressive. Bewarned that when used with a constant frame rate, HandBrake will drop or dupe frames as necessary to reach that constant rate. You can avoid this by not specifying a video framerate. By default, HandBrake will use the "Same as source" FPS, which permits a <a class="wiki" href="/wiki/VariableFrameRate">variable frame rate</a>. 
</li></ul><ul><li><strong>-8</strong> or <strong>--denoise</strong>: high quality temporal and spatial denoising. Denoising softens the image (removing detail) but can significantly reduce bitrate. The parameters, in order, control filter strength for spatial luma, spatial chroma, temporal luma, and temporal chroma. Take guidance from the <a class="wiki" href="/wiki/MacGui">MacGui</a>. You can also use some short names to commonly used parameters. A good "weak" setting for general use is --denoise="2:1:2:3", a good "medium" strength setting that will leave minor visual artifacts is --denoise="3:2:2:3", and for simple animation, consider "strong" settings of --denoise="7:7:5:5". You can just type them in like that: --denoise="weak". The default setting is the same as in MPlayer: 4:3:6:4.5.
</li></ul><ul><li><strong>-7</strong> or <strong>--deblock</strong>: pp7, a post processing filter from MPlayer, removes blocks from video. You're probably best off using its defaults and not specifying parameters. If you do, know that the default is 5, 1 is very little deblocking, and by 10 things get quite blurry.
</li></ul><ul><li><strong>--rotate</strong>: A filter to rotate the video by a number of axes. (Default 3)
</li></ul><ul><li><strong>-g</strong> or <strong>-grayscale</strong>: lets HandBrake know the movie is black and white, so it doesn't bother keeping track of color information. This can reduce green tinge or rainbow shimmering in black and white encodes. It takes no options.
</li></ul><h3 id="SubtitleOptions">Subtitle Options</h3>
<ul><li><strong>-s</strong> or <strong>--subtitle</strong>: selects a subtitle track to use. Subtitles are selected by number: the first track is 1, the second is 2, etc. HandBrake "hard burns" subtitles onto the video. If you enable them, they will always be visible. You cannot turn them on or off like with a DVD.
</li></ul><ul><li><strong>-F</strong> or <strong>--subtitle-forced</strong>: This option may be used in two ways. When used with --subtitle-scan it will modify the subtitle scan to automatically select subtitle tracks that contain forced subtitles, and then display just the forced subtitles in that track. When used on its own in conjunction with --subtitle only subtitles that have the forced flag set will be displayed for the selected subtitle track.
</li></ul><ul><li><strong>--subtitle-burn</strong>: Burn the selected subtitles into the video track.
</li></ul><ul><li><strong>--subtitle-default</strong>: Flag the selected subtitle as the default subtitle to be displayed during playback.
</li></ul><ul><li><strong>-N</strong> or <strong>--native-language</strong>: follow this flag with a language code (eng, fre, spa, dut, et cetera) and it will use that language's subtitles if the selected or default audio language differs from your native language. This way, you don't have to run a -t 0 scan first to see what subtitles are in what languages. Just tell HandBrake what language you want, and it will find the correct track if available. For example, if you select "fre" and you encode a title with French audio, you will not get any subtitles, however if you encode the same title with English audio you will get the French subtitles enabled.
</li></ul><ul><li><strong>--native-dub</strong>: when used in conjunction with --native-language it will change the audio language to match the selected language. If no match is found, the first matching subtitle will be used.
</li></ul><ul><li><strong>--srt-file</strong>:  Define a set of srt files which <a class="wiki" href="/wiki/HandBrake">HandBrake</a> can import.
</li></ul><ul><li><strong>--srt-codeset</strong>: You can tell <a class="wiki" href="/wiki/HandBrake">HandBrake</a> which character set each defined srt file uses.
</li></ul><ul><li><strong>--srt-offset</strong>: You can offset the the time where the SRT file starts in the encode. This can be positive or negative time in milliseconds.
</li></ul><ul><li><strong>--srt-lang</strong>: An iso669-2 language code (e.g fra, eng, spa) can be specified for each srt track which you have added. und is default if none is defined.
</li></ul><ul><li><strong>--srt-default</strong>: Set the default SRT track to be displayed upon playback. (first one is default is none are defined)
</li></ul><h3 id="Wheresthequeue">Where's the queue?</h3>
<p>
In the CLI, there is no queue. You can use a semi-colon:
</p>
<pre class="wiki">HandBrakeCLI -i VIDEO_TS -o movie1.mp4 -t 1 ; HandBrakeCLI -i VIDEO_TS -o movie2.mp4 -t 2
</pre><p>
Or, you can write a simple shell script.
</p>
<h2 id="Scripting">Scripting</h2>
<p>
<strong>Users</strong>
</p>
<p>
There are a good number of examples of scripts on our forums. Check out the CLI sections to see what other users have done.
</p>
<p>
<strong>Script Writers</strong>
</p>
<p>
HandBrakeCLI is designed as a test tool, and as such, is not optimised for anything more than moderate scripting. Things you should note:
</p>
<p>
<a class="wiki" href="/wiki/HandBrake">HandBrake</a> has 2 exit codes:
</p>
<p>
0 = <a class="wiki" href="/wiki/HandBrake">HandBrake</a> exited cleanly, (note this does not indicate a complete encode. It only indicates that <a class="wiki" href="/wiki/HandBrake">HandBrake</a> has exited cleanly and that the file was properly muxed. CTRL-C will cause <a class="wiki" href="/wiki/HandBrake">HandBrake</a> to exit cleanly.)
</p>
<p>
1 = <a class="wiki" href="/wiki/HandBrake">HandBrake</a> encountered a crash condition it could not recover from.
</p>
<p>
If you want to monitor <a class="wiki" href="/wiki/HandBrake">HandBrake</a>'s process, you should monitor the standard pipes.
</p>
<ul><li>Standard Output: Contains encode progress information.
</li><li>Standard Error: Contains all the logging data.
</li></ul><h2 id="links">Other Resources</h2>
<ul><li>The <a class="ext-link" href="http://forum.handbrake.fr/viewforum.php?f=10"><span class="icon">Â </span>CLI Forum</a> is full of good advise and scripts that people have created.
</li></ul></div>
        
        
      </div>
      

    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="/wiki/CLIGuide?format=txt">Plain Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="/chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="/about"><strong>Trac 0.12.2</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>